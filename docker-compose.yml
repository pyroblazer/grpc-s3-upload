version: "3.9";services: localstack:{image: localstack/localstack:3.4;environment:- SERVICES=s3;- DEFAULT_REGION=us-east-1;- DATA_DIR=/tmp/localstack/data;ports:- "4566:4566";volumes:- "./.localstack:/var/lib/localstack";healthcheck:{test:["CMD","awslocal","s3","ls"],interval:5s,retries:10}} upload-service:{build: ./upload-service;environment:- ENV=dev;- AWS_ACCESS_KEY_ID=test;- AWS_SECRET_ACCESS_KEY=test;- AWS_REGION=us-east-1;- AWS_ENDPOINT=http://localstack:4566;depends_on:[localstack];ports:- "50051:50051"} rest-gateway:{build: ./rest-gateway;depends_on:[upload-service];ports:- "8080:8080"} client-service:{build: ./client-service;depends_on:[upload-service];environment:- ENV=dev}
